import logging
from aiogram import Bot, Dispatcher, executor, types
from PIL import Image
import io

API_TOKEN =8109350774:AAGhyFMgdVXD59y7k8x5Hwr6PIhzP1hM9xc 'Ø¶Ø¹_ØªÙˆÙƒÙ†_Ø§Ù„Ø¨ÙˆØª_Ù‡Ù†Ø§'

# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„ÙˆÙ‚
logging.basicConfig(level=logging.INFO)

# Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙˆØª ÙˆØ§Ù„Ø¯ÙŠØ³Ø¨Ø§ØªØ´Ø±
bot = Bot(token=API_TOKEN)
dp = Dispatcher(bot)

@dp.message_handler(commands=['start'])
async def send_welcome(message: types.Message):
    await message.reply("Ù…Ø±Ø­Ø¨Ù‹Ø§! Ø£Ø±Ø³Ù„ Ù„ÙŠ ØµÙˆØ±Ø© ÙˆØ³Ø£Ø¹Ø·ÙŠÙƒ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙ†ÙŠ.")

@dp.message_handler(content_types=['photo'])
async def handle_photo(message: types.Message):
    # ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
    photo = message.photo[-1]
    photo_bytes = await photo.download(destination=io.BytesIO())
    photo_bytes.seek(0)

    # ÙØªØ­ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… PIL
    try:
        img = Image.open(photo_bytes)
        # ØªØ­Ù„ÙŠÙ„ Ø¨Ø³ÙŠØ· (Ù…Ø«Ø§Ù„ ÙÙ‚Ø·)
        width, height = img.size
        recommendation = "Ø§Ù„ØµÙˆØ±Ø© ØªÙ… ØªØ­Ù„ÙŠÙ„Ù‡Ø§ Ø¨Ù†Ø¬Ø§Ø­ âœ…\n"
        recommendation += f"Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯: {width} Ã— {height}\n"
        recommendation += "âœ… Ø§Ù„ØªÙˆØµÙŠØ©: Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¹Ø§Ù… ØµØ§Ø¹Ø¯ (Ù…Ø«Ø§Ù„ ØªÙˆØ¶ÙŠØ­ÙŠ)"

        await message.reply(recommendation)

    except Exception as e:
        await message.reply("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©.")

if __name__ == '__main__':
    executor.start_polling(dp, skip_updates=True)
import telebot
from PIL import Image
import os

BOT_TOKEN = "Ø¶Ø¹_ØªÙˆÙƒÙ†_Ø§Ù„Ø¨ÙˆØª_Ù‡Ù†Ø§"
bot = telebot.TeleBot(BOT_TOKEN)

@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.reply_to(message, "Ø£Ù‡Ù„Ù‹Ø§ Ø¨Ùƒ! Ø£Ø±Ø³Ù„ ØµÙˆØ±Ø© ÙˆØ³Ø£Ù‚ÙˆÙ… Ø¨ØªØ­Ù„ÙŠÙ„Ù‡Ø§ ğŸ”")

@bot.message_handler(content_types=['photo'])
def handle_photo(message):
    try:
        file_info = bot.get_file(message.photo[-1].file_id)
        downloaded_file = bot.download_file(file_info.file_path)

        file_path = f"photo_{message.chat.id}.jpg"
        with open(file_path, 'wb') as new_file:
            new_file.write(downloaded_file)

        # Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø«Ù„Ø§Ù‹ Ø¹Ø¨Ø± Ù…ÙƒØªØ¨Ø© OpenCV Ø£Ùˆ Ø£ÙŠ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ©
        bot.reply_to(message, "âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØµÙˆØ±Ø© ÙˆØ³Ø£Ù‚ÙˆÙ… Ø¨ØªØ­Ù„ÙŠÙ„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§.")

        os.remove(file_path)

    except Exception as e:
        bot.reply_to(message, f"âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØµÙˆØ±Ø©: {e}")

bot.polling()
